# Tag System Improvements for AWT

## Current Tag Issues

The current tagging system in `abif_list.yml` has grown organically
and could benefit from systematic improvements for better
discoverability and consistency.

## Proposed New Tags

### Election Characteristics

**`IRVtie`** - Elections that would result in ties under IRV/RCV
- Example: DPL2003 (already added)
- Useful for demonstrating IRV edge cases

**`CondorcetCycle`** - Elections with Condorcet cycles (no Condorcet winner)
- Examples: AlamedaCounty Oakland School Director 2022, Minneapolis Ward 2 2021 (already added)
- Important for comparative voting method analysis

**`unanimous`** - Elections with clear unanimous preferences
- Helps identify consensus vs. divisive elections

**`close-margin`** - Elections decided by very small margins
- Useful for studying electoral competitiveness

### Office Type Classification

**`mayor`** - Mayoral elections
- Many exist but inconsistently tagged
- Would group executive office elections

**`council`** - City council and similar legislative body elections
- Large number of these in the from-bolson collection
- Distinguishes from executive offices

**`congress`** - Federal legislative elections (House/Senate)
- Currently mixed in with other `government` tags
- Important distinct category

**`primary`** - Primary elections vs. general elections
- Different voter behavior and candidate dynamics
- Currently not distinguished

**`multi-winner`** - Elections choosing multiple candidates
- Different analysis considerations than single-winner
- Some council elections may be multi-winner

### Geographic Standardization

**`USA`** - All United States elections
- Many have state tags but missing country-level tag
- Useful for international comparisons as dataset grows

**Regional groupings:**
- `west-coast`, `northeast`, `midwest`, `south`
- Enables regional electoral pattern analysis

### Data Provenance and Quality

**`cvr-derived`** - Elections converted directly from Cast Vote Records
- Different from elections converted from other summary formats
- Important for data quality assessment

**`official-results`** - Elections from certified government sources
- Distinguishes from theoretical/reconstructed elections
- Quality indicator for research use

**`complete-ballots`** - Elections with full ballot information preserved
- vs. elections with truncated or aggregated data
- Affects what analysis methods are valid

### Election Context

**`special-election`** - Special elections vs. regularly scheduled
- Different turnout patterns and voter behavior
- Currently mixed with regular elections

**`ranked-choice`** - Elections that used ranked-choice voting originally
- vs. elections where rankings were estimated/simulated
- Important methodological distinction

**`partisan`** - Elections with party affiliations
- vs. nonpartisan elections
- Affects voter behavior and candidate strategies

## Implementation thoughts

### Metadata Enhancement in abiftool

Considering adding provenance metadata to `.abif` files generated by
`abiftool.py`:

```
{"provenance": "City/County of San Francisco CVR"}
{"source_url": "https://www.sfelections.org/results/20241105/data/20241203/CVR_Export_20241202143051.zip"}
{"orig_download_datetime": "2024-03-15T14:30:00Z"}
```

This would automatically tag elections with provenance information
during conversion, reducing manual tagging overhead.

### Hierarchical Tag Structure

Consider moving toward hierarchical tags:
- `office.mayor`, `office.council`, `office.congress`
- `geography.usa.ca`, `geography.usa.ny`
- `method.irv`, `method.condorcet`, `method.fptp`

This would enable both broad and specific filtering while maintaining current flat tag compatibility.

### Tag Validation

Add validation to prevent:
- Contradictory tags (`theoretical` + `official-results`)
- Missing required tags (elections without geographic tags)
- Inconsistent naming (`NYC_NY` vs `NewYork_NY`)

### Dynamic Tag Generation

For future bifhub implementation, consider auto-generating certain tags:
- Year tags from date metadata
- Geographic tags from jurisdiction fields
- Method tags from ballot type analysis

## Priority Order

1. **High Priority**: Election characteristics (`IRVtie`, `CondorcetCycle`) - already started
2. **Medium Priority**: Office type classification - high impact for browse UX
3. **Low Priority**: Hierarchical restructuring - major breaking change
4. **Future**: Automated provenance via abiftool metadata enhancement