{% if round.transfers %}
{% set eliminated_names = [] %}
{% for elim_cand in round.eliminated %}
  {% set _ = eliminated_names.append(IRV_candnames.get(elim_cand, elim_cand)) %}
{% endfor %}

<br><small><strong>Transfer: {{ eliminated_names | join(" + ") }}</strong> →</small>

{% for elim_cand, transfer_data in round.transfers.items() %}
  {% if transfer_data is mapping %}
    {% set total_transfers = transfer_data.values() | sum %}
    {% for cand, count in transfer_data.items() %}
      {% set pct = (count / total_transfers * 100) | round(1) %}
      {% if cand == 'exhausted' %}
        <br><small>{{ count }} ({{ pct }}%) exhausted</small>
      {% else %}
        <br><small>{{ count }} ({{ pct }}%) → {{ IRV_candnames.get(cand, cand) }}</small>
      {% endif %}
    {% endfor %}
  {% endif %}
{% endfor %}
{% endif %}
